<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Sync Dropbox</title>
        <link rel="shortcut icon" href="favicon.ico">
        <link rel="stylesheet" href="css/jquery.mobile-1.4.5.min.css">
        <script src="js/jquery.js"></script>
        <script src="js/jquery.mobile-1.4.5.min.js"></script>
        <script>
            $(document).on("pagecreate", "#myPage", function () {
                $("#movie-table").on("filterablebeforefilter", function (e, data) {
                    var $tab = $(this),
                        $input = $(data.input),
                        value = $input.val(),
                    html = "";
                    var tabel = $('#datahasil');
                    console.log($input);
                    if (value && value.length > 2) {
                        //tabel.empty();
//                        $tab.html("<li><div class='ui-loader'><span class='ui-icon ui-icon-loading'></span></div></li>");
//                        $tab.table("refresh");
                        $.ajax({
                            url: "http://fch.dev/api",
                            dataType: "jsonp",
                            crossDomain: true,
                            data: {
                                q: value
                            }
                        })
                                .then(function (response) {
                                    console.log("respon: "+response+" ini :"+response.kota);
                                    $.each(response, function (i, val) {
                                        //html += "<tr><td>" + val.kota + "</td></tr>";
                                       
                                        html += '<tr>'
                                                +'<th>1000</th>'
                                                +'<td><a href="#" data-rel="external">'+response[i].kota+'</a></td>'
                                                +'<td>1941</td>'
                                                +'<td>100%</td>'
                                                +'<td>74</td>'
                                                +'</tr>';
                                        console.log(html);
                                    });
                                    tabel.html(html);
                                    $tab.table("refresh");
                                    $tab.trigger("updatelayout");
                                });
                    }
                });
            });
        </script>
    </head>
    <body>
        <!--        <div data-role="page" id="utama">
        
                    <div data-role="header" style="overflow:hidden;">
                        <h1>Sync Dropbox</h1>
                            <a href="#" data-icon="gear" class="ui-btn-right">Menu</a>
                    </div> /header 
        
                    <div role="main">
                        <form>
                            <input id="autocomplete-input" data-type="search">
                        </form>
                        <table data-role="table" id="movie-table" data-filter="true" data-filter-reveal="true" data-input="#filterTable-input" class="ui-responsive ui-body-d ui-shadow table-stripe">
                            <thead>
                                <tr>
                                    <th data-priority="1">Rank</th>
                                    <th data-priority="persist">Movie Title</th>
                                    <th data-priority="2">Year</th>
                                    <th data-priority="3"><abbr title="Rotten Tomato Rating">Rating</abbr></th>
                                    <th data-priority="4">Reviews</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <th>1</th>
                                    <td><a href="http://en.wikipedia.org/wiki/Citizen_Kane" data-rel="external">Citizen Kane</a></td>
                                    <td>1941</td>
                                    <td>100%</td>
                                    <td>74</td>
                                </tr>
        
                                <tr>
                                    <th>2</th>
                                    <td><a href="http://en.wikipedia.org/wiki/Citizen_Kane" data-rel="external">Ayat ayat cinta</a></td>
                                    <td>1941</td>
                                    <td>100%</td>
                                    <td>74</td>
                                </tr>
        
        
                            </tbody>
                        </table>
                    </div> /content 
                    <div data-role="panel" data-position="left" data-display="overlay" data-theme="a">
                    </div> /panel 
                    <div data-role="footer" data-position="fixed" data-tap-toggle="false">
                        <p>jQuery Mobile Demos version <span class="jqm-version"></span></p>
                        <p>Copyright 2014 The jQuery Foundation</p>
                    </div> /footer 
                </div> /page -->
        <div data-role="page" class="jqm-demos" id="myPage">

            <div data-role="header" style="overflow:hidden;">
                <h1>Sync Dropbox</h1>
                    <a href="#" data-icon="gear" class="ui-btn-right">Menu</a>
            </div>

            <div role="main" class="ui-content jqm-content">

                    <form class="ui-filterable">
                        <input id="autocomplete-input" data-type="search" placeholder="Find a city...">
                    </form>
<!--                    <ul id="autocomplete" data-role="listview" data-inset="true" data-filter="true" data-input="#autocomplete-input"></ul>-->

<table data-role="table" id="movie-table" data-filter="true" data-filter-reveal="true" data-input="#autocomplete-input" class="ui-responsive ui-body-d ui-shadow table-stripe">
                            <thead>
                                <tr>
                                    <th data-priority="1">Rank</th>
                                    <th data-priority="persist">Movie Title</th>
                                    <th data-priority="2">Year</th>
                                    <th data-priority="3"><abbr title="Rotten Tomato Rating">Rating</abbr></th>
                                    <th data-priority="4">Reviews</th>
                                </tr>
                            </thead>
                            <tbody id="datahasil">
                                <tr >
                                    <th>1</th>
                                    <td><a href="http://en.wikipedia.org/wiki/Citizen_Kane" data-rel="external">Citizen Kane</a></td>
                                    <td>1941</td>
                                    <td>100%</td>
                                    <td>74</td>
                                </tr>
        
                                <tr>
                                    <th>2</th>
                                    <td><a href="http://en.wikipedia.org/wiki/Citizen_Kane" data-rel="external">Ayat ayat cinta</a></td>
                                    <td>1941</td>
                                    <td>100%</td>
                                    <td>74</td>
                                </tr>
        
        
                            </tbody>
                        </table>
            </div><!-- /content -->
        </div>
    </body>
</html>
